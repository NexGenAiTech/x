<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sankalp Shiksha - Quiz Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            transition: background-color 0.3s, color 0.3s, transform 0.2s;
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1a2636 0%, #0d1421 100%);
            color: #f0f0f0;
        }
        
        .container {
            width: 95%;
            max-width: 1000px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .dark-mode .container {
            background: #2c3e50;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            padding: 10px 0;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 2.2rem;
            font-weight: 700;
        }
        
        .dark-mode h1 {
            color: #f0f0f0;
        }
        
        .description {
            color: #7f8c8d;
            font-size: 1rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .dark-mode .description {
            color: #bdc3c7;
        }
        
        .header {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            border-radius: 12px 12px 0 0;
            margin: -30px -30px 25px -30px;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 4px;
            font-weight: 700;
            color: white;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.85;
        }
        
        .login-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .login-form {
            width: 100%;
            max-width: 400px;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }
        
        .dark-mode .login-form {
            background: #34495e;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #2c3e50;
            font-weight: 500;
            font-size: 13px;
        }
        
        .dark-mode .form-group label {
            color: #f0f0f0;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
            background: #f8fafc;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .dark-mode .form-group input, .dark-mode .form-group select, .dark-mode .form-group textarea {
            background: #34495e;
            border-color: #2c3e50;
            color: #f0f0f0;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #4361ee;
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
            background: white;
        }
        
        .dark-mode .form-group input:focus, .dark-mode .form-group select:focus, .dark-mode .form-group textarea:focus {
            background: #2c3e50;
        }
        
        button {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
        }
        
        button:hover {
            background: linear-gradient(135deg, #3a0ca3 0%, #4361ee 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.4);
        }
        
        .login-btn {
            width: 100%;
            padding: 13px;
        }
        
        .toggle-form {
            display: none; /* Registration link hidden */
        }
        
        .user-info-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .user-info-panel {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .user-name {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .dark-mode .user-name {
            color: #f0f0f0;
        }
        
        .user-reg {
            color: #64748b;
        }
        
        .dark-mode .user-reg {
            color: #bdc3c7;
        }
        
        .logout-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            padding: 8px 15px;
            font-size: 14px;
            width: auto;
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
        }
        
        .logout-btn:hover {
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
            box-shadow: 0 6px 15px rgba(231, 76, 60, 0.4);
        }
        
        .quiz-container, .results-container {
            display: none;
        }
        
        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .question {
            background: #34495e;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .option {
            padding: 15px;
            background: #e8f4fc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: 500;
            font-size: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .option {
            background: #2c3e50;
        }
        
        .option:hover {
            background: #d1e9fa;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .dark-mode .option:hover {
            background: #34495e;
        }
        
        .selected {
            background: #4CAF50 !important;
            color: white !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3) !important;
        }
        
        .dark-mode .selected {
            background: #4CAF50 !important;
            color: white !important;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        .nav-btn {
            width: 48%;
        }
        
        .results-container {
            text-align: center;
        }
        
        .score {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
        }
        
        .dark-mode .score {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .analysis {
            text-align: left;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1rem;
        }
        
        .dark-mode .analysis {
            background: #34495e;
        }
        
        .correct {
            color: #27ae60;
            font-weight: bold;
        }
        
        .incorrect {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .progress {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .dark-mode .progress {
            background: #2c3e50;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #3498db 0%, #1f618d 100%);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .loading {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #3498db 0%, #1f618d 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-right: 8px;
        }
        
        .timer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .timer-container {
            background: #34495e;
        }
        
        .timer {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .dark-mode .timer {
            color: #f0f0f0;
        }
        
        .timer.warning {
            color: #e74c3c;
            animation: pulse 1s infinite;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .dark-mode .footer {
            color: #bdc3c7;
        }
        
        .footer a {
            color: #3498db;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode .modal-content {
            background: #2c3e50;
            color: #f0f0f0;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }
        
        .dark-mode .close-modal {
            color: #bdc3c7;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .dark-mode .close-modal:hover {
            color: #f0f0f0;
        }
        
        .question-analysis {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .dark-mode .question-analysis {
            border-bottom: 1px solid #34495e;
        }
        
        .question-analysis:last-child {
            border-bottom: none;
        }
        
        .correct-answer {
            background: #d4edda;
            padding: 10px;
            border-radius: 4px;
            margin-top: 8px;
            font-size: 0.9rem;
        }
        
        .dark-mode .correct-answer {
            background: #27ae60;
            color: white;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .quiz-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
        
        .dark-mode .quiz-title {
            color: #f0f0f0;
        }
        
        .centered-button-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .centered-button {
            width: 100%;
            max-width: 300px;
        }
        
        .mode-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            transition: all 0.3s;
        }
        
        .dark-mode .mode-toggle {
            background: #f0f0f0;
            color: #2c3e50;
        }
        
        .mode-toggle:hover {
            transform: scale(1.1);
        }
        
        .instruction-toggle {
            position: absolute;
            top: 20px;
            right: 80px;
            background: #f39c12;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            transition: all 0.3s;
        }
        
        .dark-mode .instruction-toggle {
            background: #e67e22;
            color: #f0f0f0;
        }
        
        .instruction-toggle:hover {
            background: #e67e22;
            transform: scale(1.1);
        }
        
        .dark-mode .instruction-toggle:hover {
            background: #d35400;
        }
        
        .review-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .review-panel {
            background: #34495e;
        }
        
        .review-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dark-mode .review-title {
            color: #f0f0f0;
        }
        
        .review-status {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-answered {
            background-color: #27ae60;
        }
        
        .status-skipped {
            background-color: #f39c12;
        }
        
        .status-unanswered {
            background-color: #e74c3c;
        }
        
        .status-current {
            background-color: #3498db;
        }
        
        .review-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }
        
        .review-btn {
            width: 17px;  /* Reduced by 30% from 25px */
            height: 17px; /* Reduced by 30% from 25px */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            transition: all 0.2s;
            font-size: 0.7rem; /* Adjusted for smaller size */
        }
        
        .dark-mode .review-btn {
            background: #2c3e50;
            color: #f0f0f0;
            border-color: #34495e;
        }
        
        .review-btn.answered {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        
        .review-btn.skipped {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }
        
        .review-btn.unanswered {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        .review-btn.current {
            border: 2px solid #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.8);
        }
        
        .info-text {
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
            font-style: italic;
        }
        
        .welcome-animation {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            border-radius: 10px;
            color: white;
            animation: fadeIn 1s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @media (max-width: 900px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .container {
                padding: 20px;
            }
        }
        
        @media (max-width: 600px) {
            body {
                padding: 15px;
            }
            
            .container {
                width: 100%;
                padding: 15px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .mode-toggle, .instruction-toggle {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .instruction-toggle {
                right: 60px;
            }
            
            .review-status {
                flex-direction: column;
                gap: 5px;
            }
            
            .user-info-panel {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <button class="instruction-toggle" id="instructionToggle">
        <i class="fas fa-info-circle"></i>
    </button>
    
    <button class="mode-toggle" id="modeToggle">
        <i class="fas fa-moon"></i>
    </button>
    
    <div class="container">
        <div class="header">
            <h1>Sankalp Shiksha Quiz Portal</h1>
        </div>
        
        <!-- Welcome Animation -->
        <div class="welcome-animation" id="welcomeAnimation" style="display: none;">
            <h2>Welcome, <span id="welcomeName">Student</span>!</h2>
            <p>Good luck with your quiz. You have 50 minutes to complete 50 questions.</p>
        </div>
        
        <!-- Login Section -->
        <div class="login-section" id="loginSection">
            <div class="login-form">
                <h2>Student Login</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-reg-number">Registration Number</label>
                        <input type="text" id="login-reg-number" required placeholder="10-digit registration number">
                    </div>
                    
                    <div class="form-group">
                        <label for="login-dob">Date of Birth</label>
                        <input type="text" id="login-dob" required placeholder="DDMMYYYY (e.g., 24092025)" maxlength="8">
                        <p class="info-text">Enter your date of birth in DDMMYYYY format</p>
                    </div>
                    
                    <button type="submit" class="login-btn">Login to Quiz Portal</button>
                </form>
            </div>
        </div>
        
        <!-- User Info Panel (shown after login) -->
        <div class="user-info-panel" id="userInfoPanel" style="display: none;">
            <div class="user-details">
                <div class="user-name" id="display-student-name">Student Name</div>
                <div class="user-reg" id="display-reg-number">Registration Number</div>
            </div>
            <button class="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
        
        <!-- Quiz Container -->
        <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <h2 class="quiz-title">General Knowledge Quiz</h2>
            </div>
            
            <div class="timer-container">
                <div>Time Remaining:</div>
                <div class="timer" id="timer">50:00</div>
            </div>
            
            <div class="review-panel" id="reviewPanel">
                <div class="review-title">
                    <i class="fas fa-list"></i> Question Review
                </div>
                <div class="review-status">
                    <div class="status-item">
                        <span class="status-color status-answered"></span>
                        <span>Answered</span>
                    </div>
                    <div class="status-item">
                        <span class="status-color status-skipped"></span>
                        <span>Skipped</span>
                    </div>
                    <div class="status-item">
                        <span class="status-color status-unanswered"></span>
                        <span>Unanswered</span>
                    </div>
                    <div class="status-item">
                        <span class="status-color status-current"></span>
                        <span>Current</span>
                    </div>
                </div>
                <div class="review-buttons" id="reviewButtons"></div>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div id="questionContainer"></div>
            <div class="navigation">
                <button class="nav-btn secondary" id="prevBtn"><i class="fas fa-arrow-left"></i> Previous</button>
                <button class="nav-btn" id="nextBtn">Next <i class="fas fa-arrow-right"></i></button>
            </div>
            <div class="centered-button-container">
                <button id="submitQuiz" class="centered-button" style="display: none;"><i class="fas fa-paper-plane"></i> Submit Quiz</button>
            </div>
        </div>
        
        <!-- Results Container -->
        <div class="results-container" id="resultsContainer">
            <h2><i class="fas fa-chart-line"></i> Quiz Results</h2>
            <div class="score" id="score"></div>
            <div class="analysis" id="analysis"></div>
            
            <div class="centered-button-container">
                <button id="feedbackBtn" class="centered-button"><i class="fas fa-comment"></i> Feedback</button>
            </div>
        </div>
        
        <div class="footer">
            <p>Powered by NexGenAiTech</p>
        </div>
    </div>

    <!-- Instruction Modal -->
    <div class="modal" id="instructionModal">
        <div class="modal-content">
            <span class="close-modal" id="closeInstructionModal">&times;</span>
            <h2><i class="fas fa-info-circle"></i> Quiz Instructions</h2>
            
            <div style="margin-top: 20px;">
                <h3 style="color: #e74c3c; margin-bottom: 15px;">
                    <i class="fas fa-exclamation-triangle"></i> Important Warning:
                </h3>
                <p style="background: #ffeaa7; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
                    <strong>किसी भी प्रकार की नकल करने पर आपका टेस्ट अयोग्य घोषित कर दिया जाएगा।</strong>
                </p>
                
                <h3 style="margin-bottom: 10px;">Test Instructions:</h3>
                <ul style="padding-left: 20px; margin-bottom: 20px;">
                    <li>इस क्विज में कुल 50 प्रश्न हैं</li>
                    <li>आपके पास पूरा टेस्ट देने के लिए 50 मिनट का समय है</li>
                    <li>प्रत्येक प्रश्न के चार विकल्प हैं, सही उत्तर चुनें</li>
                    <li>Previous और Next बटन का उपयोग करके प्रश्नों के बीच नेविगेट कर सकते हैं</li>
                    <li>Question Review पैनल से किसी भी प्रश्न पर सीधे जा सकते हैं</li>
                    <li>एक बार उत्तर चुनने के बाद वह स्वचालित रूप से सेव हो जाएगा</li>
                    <li>किसी भी समय अपना उत्तर बदल सकते हैं</li>
                    <li>टेस्ट पूरा करने के बाद Submit Quiz बटन पर क्लिक करें</li>
                </ul>
                
                <p style="font-style: italic; color: #7f8c8d;">
                    सभी निर्देशों को ध्यान से पढ़ें और ईमानदारी से टेस्ट दें।
                </p>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <span class="close-modal" id="closeFeedbackModal">&times;</span>
            <h2><i class="fas fa-comment"></i> Feedback</h2>
            
            <form id="feedback-form">
                <div class="form-group">
                    <label for="feedback-name">Student Name</label>
                    <input type="text" id="feedback-name" readonly>
                </div>
                
                <div class="form-group">
                    <label for="feedback-mobile">Mobile Number</label>
                    <input type="text" id="feedback-mobile" readonly>
                </div>
                
                <div class="form-group">
                    <label for="feedback-message">Message for Updates</label>
                    <textarea id="feedback-message" rows="5" required placeholder="Your feedback or message for new updates"></textarea>
                </div>
                
                <button type="submit" class="login-btn">Submit Feedback</button>
            </form>
            
            <div class="result" id="feedback-result" style="display: none; margin-top: 15px; padding: 15px; background: #e8f4fc; border-radius: 6px; border-left: 4px solid #4361ee;">
                <h3><i class="fas fa-check-circle"></i> Feedback Submitted Successfully!</h3>
                <p>Thank you for your valuable feedback.</p>
            </div>
        </div>
    </div>

    <script>
        // DOM elements
        const loginSection = document.getElementById('loginSection');
        const userInfoPanel = document.getElementById('userInfoPanel');
        const quizContainer = document.getElementById('quizContainer');
        const resultsContainer = document.getElementById('resultsContainer');
        const questionContainer = document.getElementById('questionContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitQuiz = document.getElementById('submitQuiz');
        const progressBar = document.getElementById('progressBar');
        const scoreElement = document.getElementById('score');
        const analysisElement = document.getElementById('analysis');
        const feedbackBtn = document.getElementById('feedbackBtn');
        const timerElement = document.getElementById('timer');
        const reviewButtons = document.getElementById('reviewButtons');
        const modeToggle = document.getElementById('modeToggle');
        const instructionToggle = document.getElementById('instructionToggle');
        const modeIcon = modeToggle.querySelector('i');
        const loginForm = document.getElementById('login-form');
        const feedbackModal = document.getElementById('feedbackModal');
        const instructionModal = document.getElementById('instructionModal');
        const feedbackForm = document.getElementById('feedback-form');
        const closeFeedbackModal = document.getElementById('closeFeedbackModal');
        const closeInstructionModal = document.getElementById('closeInstructionModal');
        const feedbackResult = document.getElementById('feedback-result');
        const displayStudentName = document.getElementById('display-student-name');
        const displayRegNumber = document.getElementById('display-reg-number');
        const feedbackName = document.getElementById('feedback-name');
        const feedbackMobile = document.getElementById('feedback-mobile');
        const welcomeAnimation = document.getElementById('welcomeAnimation');
        const welcomeName = document.getElementById('welcomeName');
        
        // Quiz variables
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizData = [];
        let timerInterval = null;
        let timeLeft = 0;
        let visitedQuestions = [];
        let currentUser = null;
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                modeIcon.classList.remove('fa-moon');
                modeIcon.classList.add('fa-sun');
            }
            
            // Check if user is already logged in
            const loggedInUser = localStorage.getItem('currentUser');
            if (loggedInUser) {
                currentUser = JSON.parse(loggedInUser);
                showQuizInterface();
            }
            
            // Set up event listeners
            loginForm.addEventListener('submit', handleLogin);
            prevBtn.addEventListener('click', showPreviousQuestion);
            nextBtn.addEventListener('click', showNextQuestion);
            submitQuiz.addEventListener('click', showResults);
            feedbackBtn.addEventListener('click', showFeedbackModal);
            modeToggle.addEventListener('click', toggleDarkMode);
            instructionToggle.addEventListener('click', showInstructionModal);
            feedbackForm.addEventListener('submit', handleFeedback);
            closeFeedbackModal.addEventListener('click', closeFeedbackModalFunc);
            closeInstructionModal.addEventListener('click', closeInstructionModalFunc);
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === feedbackModal) {
                    closeFeedbackModalFunc();
                }
                if (e.target === instructionModal) {
                    closeInstructionModalFunc();
                }
            });
        });
        
        // Show instruction modal
        function showInstructionModal() {
            instructionModal.style.display = 'flex';
        }
        
        // Close instruction modal
        function closeInstructionModalFunc() {
            instructionModal.style.display = 'none';
        }
        
        // Show feedback modal
        function showFeedbackModal() {
            if (currentUser) {
                feedbackName.value = currentUser.name;
                feedbackMobile.value = currentUser.mobile || "Not available";
            }
            feedbackModal.style.display = 'flex';
            feedbackResult.style.display = 'none';
            feedbackForm.reset();
        }
        
        // Close feedback modal
        function closeFeedbackModalFunc() {
            feedbackModal.style.display = 'none';
        }
        
        // Validate DDMMYYYY format
        function isValidDDMMYYYY(dateString) {
            // Check if it's exactly 8 digits
            if (!/^\d{8}$/.test(dateString)) {
                return false;
            }
            
            // Extract day, month, year
            const day = parseInt(dateString.substring(0, 2));
            const month = parseInt(dateString.substring(2, 4));
            const year = parseInt(dateString.substring(4, 8));
            
            // Check if month is valid
            if (month < 1 || month > 12) {
                return false;
            }
            
            // Check if day is valid for the given month
            const daysInMonth = new Date(year, month, 0).getDate();
            if (day < 1 || day > daysInMonth) {
                return false;
            }
            
            // Check if year is reasonable (between 1900 and current year + 10)
            const currentYear = new Date().getFullYear();
            if (year < 1900 || year > currentYear + 10) {
                return false;
            }
            
            return true;
        }
        
        // Handle login form submission
        function handleLogin(e) {
            e.preventDefault();
            
            const regNumber = document.getElementById('login-reg-number').value;
            const dob = document.getElementById('login-dob').value;
            
            // Validate date of birth format
            if (!isValidDDMMYYYY(dob)) {
                alert('Please enter a valid date in DDMMYYYY format (e.g., 24092025 for 24 Sep 2025)');
                return;
            }
            
            // Retrieve user data from localStorage
            const userData = JSON.parse(localStorage.getItem('user_' + regNumber));
            
            if (userData && userData.password === dob) {
                // Login successful
                currentUser = userData;
                localStorage.setItem('currentUser', JSON.stringify(userData));
                showQuizInterface();
            } else {
                alert('Invalid registration number or date of birth. Please try again.');
            }
        }
        
        // Show quiz interface after login
        function showQuizInterface() {
            loginSection.style.display = 'none';
            userInfoPanel.style.display = 'flex';
            quizContainer.style.display = 'block';
            
            // Display user info
            displayStudentName.textContent = currentUser.name;
            displayRegNumber.textContent = currentUser.regNumber;
            welcomeName.textContent = currentUser.name;
            
            // Show welcome animation
            welcomeAnimation.style.display = 'block';
            
            // Hide welcome animation after 3 seconds
            setTimeout(() => {
                welcomeAnimation.style.display = 'none';
            }, 3000);
            
            // Generate the quiz
            generateQuiz();
        }
        
        // Logout function
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            
            userInfoPanel.style.display = 'none';
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'none';
            loginSection.style.display = 'flex';
            welcomeAnimation.style.display = 'none';
            
            // Reset the login form
            loginForm.reset();
            
            // Stop the timer if running
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }
        
        // Toggle dark mode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                modeIcon.classList.remove('fa-moon');
                modeIcon.classList.add('fa-sun');
            } else {
                localStorage.setItem('darkMode', 'disabled');
                modeIcon.classList.remove('fa-sun');
                modeIcon.classList.add('fa-moon');
            }
        }
        
        // Generate quiz with 50 questions
        function generateQuiz() {
            // Use the predefined 50 questions
            quizData = fiftyQuestions;
            userAnswers = new Array(quizData.length).fill(null);
            visitedQuestions = new Array(quizData.length).fill(false);
            
            // Initialize quiz
            currentQuestionIndex = 0;
            visitedQuestions[0] = true;
            
            // Create review buttons
            createReviewButtons();
            updateReviewPanel();
            
            // Start timer (50 minutes for 50 questions)
            startTimer(50 * 60); // 50 minutes in seconds
            
            updateProgressBar();
            displayQuestion();
        }
        
        // Create review buttons
        function createReviewButtons() {
            reviewButtons.innerHTML = '';
            for (let i = 0; i < quizData.length; i++) {
                const button = document.createElement('div');
                button.className = 'review-btn';
                button.textContent = i + 1;
                button.setAttribute('data-index', i);
                
                button.addEventListener('click', () => {
                    currentQuestionIndex = i;
                    visitedQuestions[i] = true;
                    updateProgressBar();
                    updateReviewPanel();
                    displayQuestion();
                });
                
                reviewButtons.appendChild(button);
            }
        }
        
        // Update review panel
        function updateReviewPanel() {
            const buttons = reviewButtons.querySelectorAll('.review-btn');
            buttons.forEach((button, index) => {
                const i = parseInt(button.getAttribute('data-index'));
                
                // Remove all status classes
                button.classList.remove('answered', 'skipped', 'unanswered', 'current');
                
                // Add appropriate status class
                if (i === currentQuestionIndex) {
                    button.classList.add('current');
                } else if (userAnswers[i] !== null) {
                    button.classList.add('answered');
                } else if (visitedQuestions[i]) {
                    button.classList.add('skipped');
                } else {
                    button.classList.add('unanswered');
                }
            });
        }
        
        // Start the timer
        function startTimer(seconds) {
            timeLeft = seconds;
            updateTimerDisplay();
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert('Time is up! Submitting your quiz now.');
                    showResults();
                } else if (timeLeft <= 300) { // 5 minutes remaining
                    timerElement.classList.add('warning');
                }
            }, 1000);
        }
        
        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Display current question
        function displayQuestion() {
            const question = quizData[currentQuestionIndex];
            questionContainer.innerHTML = `
                <div class="question">
                    <h3>Question ${currentQuestionIndex + 1}</h3>
                    <p>${question.question}</p>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option ${userAnswers[currentQuestionIndex] === String.fromCharCode(65 + index) ? 'selected' : ''}" 
                                 data-option="${String.fromCharCode(65 + index)}">
                                ${String.fromCharCode(65 + index)}. ${option}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Add event listeners to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', selectOption);
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = false;
            submitQuiz.style.display = currentQuestionIndex === quizData.length - 1 ? 'block' : 'none';
            
            // Update review panel
            updateReviewPanel();
        }
        
        // Select an option
        function selectOption(e) {
            const selectedOption = e.target.getAttribute('data-option');
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Update UI
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            e.target.classList.add('selected');
            
            // Update review panel
            updateReviewPanel();
            
            // Auto-advance to next question after a short delay if not the last question
            if (currentQuestionIndex < quizData.length - 1) {
                setTimeout(showNextQuestion, 500);
            }
        }
        
        // Show next question
        function showNextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                visitedQuestions[currentQuestionIndex] = true;
                updateProgressBar();
                updateReviewPanel();
                displayQuestion();
            }
        }
        
        // Show previous question
        function showPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                visitedQuestions[currentQuestionIndex] = true;
                updateProgressBar();
                updateReviewPanel();
                displayQuestion();
            }
        }
        
        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // Show results
        function showResults() {
            // Stop the timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Calculate score
            let correctCount = 0;
            quizData.forEach((question, index) => {
                if (userAnswers[index] === question.answer) {
                    correctCount++;
                }
            });
            
            const score = (correctCount / quizData.length) * 100;
            
            // Display score
            scoreElement.textContent = `Score: ${score.toFixed(1)}% (${correctCount}/${quizData.length})`;
            
            // Generate analysis
            let analysisHTML = `
                <h3>Quiz Details:</h3>
                <p><span class="badge">Quiz Type</span> General Knowledge</p>
                <p><span class="badge">Total Questions</span> 50</p>
                
                <h3 style="margin-top: 15px;">Question Analysis:</h3>
            `;
            
            quizData.forEach((question, index) => {
                const isCorrect = userAnswers[index] === question.answer;
                const userAnswerLetter = userAnswers[index] || 'Not answered';
                const correctAnswerLetter = question.answer;
                const correctAnswerIndex = correctAnswerLetter.charCodeAt(0) - 65;
                const correctAnswerText = question.options[correctAnswerIndex];
                
                analysisHTML += `
                    <div class="question-analysis">
                        <p><strong>Question ${index + 1}:</strong> ${question.question}</p>
                        <p class="${isCorrect ? 'correct' : 'incorrect'}">
                            Your answer: ${userAnswerLetter} 
                            ${isCorrect ? '✓ Correct' : '✗ Incorrect'}
                        </p>
                        <div class="correct-answer">
                            <strong>Correct Answer:</strong> ${correctAnswerLetter}. ${correctAnswerText}
                        </div>
                    </div>
                `;
            });
            
            analysisElement.innerHTML = analysisHTML;
            
            // Show results, hide quiz
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
        }
        
        // Handle feedback form submission
        function handleFeedback(e) {
            e.preventDefault();
            
            const message = document.getElementById('feedback-message').value;
            
            if (!message) {
                alert('Please enter your feedback message');
                return;
            }
            
            // Create feedback data object
            const feedbackData = {
                name: currentUser.name,
                mobile: currentUser.mobile || "Not available",
                regNumber: currentUser.regNumber,
                message: message,
                timestamp: new Date().toLocaleString()
            };
            
            // Store feedback in localStorage
            let feedbacks = JSON.parse(localStorage.getItem('feedbacks')) || [];
            feedbacks.push(feedbackData);
            localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
            
            // Display success message
            feedbackResult.style.display = 'block';
            
            // Clear the form
            feedbackForm.reset();
            
            // Close modal after 2 seconds
            setTimeout(() => {
                feedbackModal.style.display = 'none';
            }, 2000);
        }
        
        // 50 predefined questions
        const fiftyQuestions = [
            {
                question: "What is the capital of France?",
                options: ["London", "Berlin", "Paris", "Madrid"],
                answer: "C"
            },
            {
                question: "Which planet is known as the Red Planet?",
                options: ["Venus", "Mars", "Jupiter", "Saturn"],
                answer: "B"
            },
            {
                question: "What is the largest mammal in the world?",
                options: ["Elephant", "Blue Whale", "Giraffe", "Hippopotamus"],
                answer: "B"
            },
            {
                question: "Which element has the chemical symbol 'O'?",
                options: ["Gold", "Oxygen", "Osmium", "Oganesson"],
                answer: "B"
            },
            {
                question: "Who wrote 'Romeo and Juliet'?",
                options: ["Charles Dickens", "William Shakespeare", "Jane Austen", "Mark Twain"],
                answer: "B"
            },
            {
                question: "What is the smallest prime number?",
                options: ["0", "1", "2", "3"],
                answer: "C"
            },
            {
                question: "Which country is known as the Land of the Rising Sun?",
                options: ["China", "Japan", "Thailand", "South Korea"],
                answer: "B"
            },
            {
                question: "What is the hardest natural substance on Earth?",
                options: ["Gold", "Iron", "Diamond", "Platinum"],
                answer: "C"
            },
            {
                question: "How many continents are there on Earth?",
                options: ["5", "6", "7", "8"],
                answer: "C"
            },
            {
                question: "What is the main language spoken in Brazil?",
                options: ["Spanish", "Portuguese", "French", "English"],
                answer: "B"
            },
            {
                question: "Which gas do plants absorb from the atmosphere?",
                options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                answer: "C"
            },
            {
                question: "What is the largest ocean on Earth?",
                options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
                answer: "D"
            },
            {
                question: "Who painted the Mona Lisa?",
                options: ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Michelangelo"],
                answer: "C"
            },
            {
                question: "What is the currency of Japan?",
                options: ["Yuan", "Won", "Yen", "Ringgit"],
                answer: "C"
            },
            {
                question: "Which organ in the human body produces insulin?",
                options: ["Liver", "Pancreas", "Kidney", "Stomach"],
                answer: "B"
            },
            {
                question: "What is the tallest mountain in the world?",
                options: ["K2", "Mount Everest", "Kangchenjunga", "Lhotse"],
                answer: "B"
            },
            {
                question: "Which year did World War II end?",
                options: ["1943", "1944", "1945", "1946"],
                answer: "C"
            },
            {
                question: "What is the chemical symbol for gold?",
                options: ["Go", "Gd", "Au", "Ag"],
                answer: "C"
            },
            {
                question: "Which planet is known for its rings?",
                options: ["Jupiter", "Saturn", "Uranus", "Neptune"],
                answer: "B"
            },
            {
                question: "Who discovered penicillin?",
                options: ["Marie Curie", "Alexander Fleming", "Louis Pasteur", "Robert Koch"],
                answer: "B"
            },
            {
                question: "What is the largest desert in the world?",
                options: ["Gobi Desert", "Sahara Desert", "Arabian Desert", "Kalahari Desert"],
                answer: "B"
            },
            {
                question: "Which animal is known as the 'King of the Jungle'?",
                options: ["Tiger", "Lion", "Elephant", "Gorilla"],
                answer: "B"
            },
            {
                question: "What is the speed of light?",
                options: ["299,792 km/s", "300,000 km/s", "250,000 km/s", "350,000 km/s"],
                answer: "A"
            },
            {
                question: "Which country has the largest population in the world?",
                options: ["India", "United States", "China", "Indonesia"],
                answer: "C"
            },
            {
                question: "What is the main ingredient in guacamole?",
                options: ["Tomato", "Avocado", "Onion", "Pepper"],
                answer: "B"
            },
            {
                question: "Which planet is closest to the Sun?",
                options: ["Venus", "Earth", "Mercury", "Mars"],
                answer: "C"
            },
            {
                question: "What is the largest bird in the world?",
                options: ["Eagle", "Ostrich", "Albatross", "Condor"],
                answer: "B"
            },
            {
                question: "Which language has the most native speakers?",
                options: ["English", "Spanish", "Hindi", "Mandarin Chinese"],
                answer: "D"
            },
            {
                question: "What is the capital of Australia?",
                options: ["Sydney", "Melbourne", "Canberra", "Perth"],
                answer: "C"
            },
            {
                question: "How many bones are in the human body?",
                options: ["196", "206", "216", "226"],
                answer: "B"
            },
            {
                question: "Which country is known as the Land of the Midnight Sun?",
                options: ["Sweden", "Norway", "Finland", "Iceland"],
                answer: "B"
            },
            {
                question: "What is the largest species of shark?",
                options: ["Great White Shark", "Whale Shark", "Tiger Shark", "Hammerhead Shark"],
                answer: "B"
            },
            {
                question: "Which element has the atomic number 1?",
                options: ["Helium", "Hydrogen", "Lithium", "Oxygen"],
                answer: "B"
            },
            {
                question: "Who wrote 'Hamlet'?",
                options: ["Charles Dickens", "William Shakespeare", "Jane Austen", "George Orwell"],
                answer: "B"
            },
            {
                question: "What is the smallest country in the world?",
                options: ["Monaco", "Vatican City", "San Marino", "Liechtenstein"],
                answer: "B"
            },
            {
                question: "Which gas makes up the majority of Earth's atmosphere?",
                options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Argon"],
                answer: "C"
            },
            {
                question: "What is the longest river in the world?",
                options: ["Amazon River", "Nile River", "Yangtze River", "Mississippi River"],
                answer: "B"
            },
            {
                question: "Which planet has the most moons?",
                options: ["Jupiter", "Saturn", "Uranus", "Neptune"],
                answer: "B"
            },
            {
                question: "What is the capital of Canada?",
                options: ["Toronto", "Vancouver", "Ottawa", "Montreal"],
                answer: "C"
            },
            {
                question: "Which blood type is known as the universal donor?",
                options: ["A", "B", "AB", "O"],
                answer: "D"
            },
            {
                question: "What is the largest organ in the human body?",
                options: ["Liver", "Heart", "Skin", "Lungs"],
                answer: "C"
            },
            {
                question: "Which country gifted the Statue of Liberty to the United States?",
                options: ["Spain", "France", "England", "Italy"],
                answer: "B"
            },
            {
                question: "What is the boiling point of water in Celsius?",
                options: ["90°C", "100°C", "110°C", "120°C"],
                answer: "B"
            },
            {
                question: "Which animal is the fastest land animal?",
                options: ["Lion", "Cheetah", "Horse", "Greyhound"],
                answer: "B"
            },
            {
                question: "What is the square root of 64?",
                options: ["6", "7", "8", "9"],
                answer: "C"
            },
            {
                question: "Which planet is known as the Evening Star?",
                options: ["Mars", "Venus", "Jupiter", "Saturn"],
                answer: "B"
            },
            {
                question: "What is the chemical formula for table salt?",
                options: ["NaCl", "KCl", "CaCl2", "MgCl2"],
                answer: "A"
            },
            {
                question: "Which country has the most time zones?",
                options: ["United States", "Russia", "China", "Australia"],
                answer: "B"
            },
            {
                question: "What is the largest type of big cat?",
                options: ["Lion", "Tiger", "Jaguar", "Leopard"],
                answer: "B"
            },
            {
                question: "Which musical instrument has 88 keys?",
                options: ["Guitar", "Violin", "Piano", "Organ"],
                answer: "C"
            }
        ];
    </script>
</body>
</html>