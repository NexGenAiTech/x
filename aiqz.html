<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sankalp Shiksha - AI Quiz Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background: #f8f9fa;
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        body.dark-mode {
            background: #1a2636;
            color: #f0f0f0;
        }
        
        .container {
            width: 95%;
            max-width: 1000px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin: 20px 0;
            position: relative;
        }
        
        .dark-mode .container {
            background: #2c3e50;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            padding: 10px 0;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 2.2rem;
            font-weight: 700;
        }
        
        .dark-mode h1 {
            color: #f0f0f0;
        }
        
        .description {
            color: #7f8c8d;
            font-size: 1rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .dark-mode .description {
            color: #bdc3c7;
        }
        
        .logo {
            font-size: 2.2rem;
            margin-bottom: 12px;
            color: #3498db;
        }
        
        .form-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1rem;
        }
        
        .dark-mode label {
            color: #f0f0f0;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            background: white;
            color: #333;
            transition: all 0.3s;
        }
        
        .dark-mode input, .dark-mode select, .dark-mode textarea {
            background: #34495e;
            border-color: #2c3e50;
            color: #f0f0f0;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        button.secondary {
            background: #2c3e50;
        }
        
        button.secondary:hover {
            background: #1a2636;
        }
        
        .dark-mode button.secondary {
            background: #34495e;
        }
        
        .dark-mode button.secondary:hover {
            background: #2c3e50;
        }
        
        .quiz-container, .results-container {
            display: none;
        }
        
        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .question {
            background: #34495e;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 15px;
        }
        
        .option {
            padding: 12px;
            background: #e8f4fc;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: 500;
            font-size: 1rem;
        }
        
        .dark-mode .option {
            background: #2c3e50;
        }
        
        .option:hover {
            background: #d1e9fa;
            transform: translateY(-2px);
        }
        
        .dark-mode .option:hover {
            background: #34495e;
        }
        
        .selected {
            background: #3498db;
            color: white;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        .nav-btn {
            width: 48%;
        }
        
        .results-container {
            text-align: center;
        }
        
        .score {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin: 20px 0;
        }
        
        .dark-mode .score {
            color: #f0f0f0;
        }
        
        .analysis {
            text-align: left;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1rem;
        }
        
        .dark-mode .analysis {
            background: #34495e;
        }
        
        .correct {
            color: #27ae60;
            font-weight: bold;
        }
        
        .incorrect {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .progress {
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .dark-mode .progress {
            background: #2c3e50;
        }
        
        .progress-bar {
            height: 100%;
            background: #3498db;
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .loading {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        .badge {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-right: 8px;
        }
        
        .header-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .control-btn {
            width: auto;
            padding: 8px 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .quiz-header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .timer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .dark-mode .timer-container {
            background: #34495e;
        }
        
        .timer {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .dark-mode .timer {
            color: #f0f0f0;
        }
        
        .timer.warning {
            color: #e74c3c;
            animation: pulse 1s infinite;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .dark-mode .footer {
            color: #bdc3c7;
        }
        
        .footer a {
            color: #3498db;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .dark-mode .modal-content {
            background: #2c3e50;
            color: #f0f0f0;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }
        
        .dark-mode .close-modal {
            color: #bdc3c7;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .dark-mode .close-modal:hover {
            color: #f0f0f0;
        }
        
        .question-analysis {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .dark-mode .question-analysis {
            border-bottom: 1px solid #34495e;
        }
        
        .question-analysis:last-child {
            border-bottom: none;
        }
        
        .correct-answer {
            background: #d4edda;
            padding: 10px;
            border-radius: 4px;
            margin-top: 8px;
            font-size: 0.9rem;
        }
        
        .dark-mode .correct-answer {
            background: #27ae60;
            color: white;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .quiz-header-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quiz-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
        
        .dark-mode .quiz-title {
            color: #f0f0f0;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            padding: 8px 15px;
            width: auto;
        }
        
        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .share-btn {
            width: auto;
            padding: 10px 15px;
        }
        
        .share-btn.facebook {
            background: #3b5998;
        }
        
        .share-btn.twitter {
            background: #1da1f2;
        }
        
        .share-btn.whatsapp {
            background: #25d366;
        }
        
        /* New styles for centered buttons */
        .centered-button-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .centered-button {
            width: 100%;
            max-width: 300px;
        }
        
        /* Mode toggle button */
        .mode-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .dark-mode .mode-toggle {
            background: #f0f0f0;
            color: #2c3e50;
        }
        
        /* Instructions button */
        .instructions-toggle {
            position: absolute;
            top: 20px;
            right: 80px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .dark-mode .instructions-toggle {
            background: #f0f0f0;
            color: #2c3e50;
        }
        
        /* Review panel styles */
        .review-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .review-panel {
            background: #34495e;
        }
        
        .review-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dark-mode .review-title {
            color: #f0f0f0;
        }
        
        .review-status {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-answered {
            background-color: #27ae60;
        }
        
        .status-skipped {
            background-color: #f39c12;
        }
        
        .status-unanswered {
            background-color: #e74c3c;
        }
        
        .status-current {
            background-color: #3498db;
        }
        
        .review-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }
        
        .review-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            transition: all 0.2s;
        }
        
        .dark-mode .review-btn {
            background: #2c3e50;
            color: #f0f0f0;
            border-color: #34495e;
        }
        
        .review-btn.answered {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        
        .review-btn.skipped {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }
        
        .review-btn.unanswered {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        .review-btn.current {
            border: 2px solid #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.8);
        }
        
        /* User Details Form Styles */
        .user-details-form {
            margin-top: 15px;
        }
        
        .user-details-form .form-group {
            margin-bottom: 15px;
        }
        
        .user-details-form label {
            margin-bottom: 5px;
        }
        
        .user-details-form input {
            padding: 10px;
        }
        
        .form-required {
            color: #e74c3c;
        }
        
        .user-details-submit {
            margin-top: 10px;
            width: 100%;
        }
        
        /* Feedback form styles */
        .feedback-form .form-group {
            margin-bottom: 15px;
        }
        
        .feedback-form label {
            margin-bottom: 5px;
        }
        
        .feedback-form textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .feedback-submit {
            margin-top: 10px;
            width: 100%;
        }
        
        .feedback-success {
            display: none;
            text-align: center;
            padding: 20px;
            color: #27ae60;
        }
        
        .feedback-success i {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        @media (max-width: 900px) {
            .form-section {
                grid-template-columns: 1fr;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .container {
                padding: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .quiz-header-controls {
                flex-direction: column;
                gap: 5px;
            }
        }
        
        @media (max-width: 600px) {
            body {
                padding: 15px;
            }
            
            .container {
                width: 100%;
                padding: 15px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .header-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }
            
            .share-buttons {
                flex-direction: column;
            }
            
            .quiz-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .quiz-header-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .mode-toggle {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .instructions-toggle {
                top: 10px;
                right: 60px;
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .review-status {
                flex-direction: column;
                gap: 5px;
            }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <button class="mode-toggle" id="modeToggle">
        <i class="fas fa-moon"></i>
    </button>
    
    <button class="instructions-toggle" id="instructionsToggle">
        <i class="fas fa-info"></i>
    </button>
    
    <div class="container">
        <div class="main-header" id="mainHeader">
            <header>
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h1>Sankalp Shiksha Quiz Generator</h1>
                <p class="description">Create customized quizzes for any class, course, or subject using AI</p>
                
                <div class="header-controls">
                    <button class="control-btn secondary" id="feedbackBtn">
                        <i class="fas fa-comment"></i> Feedback
                    </button>
                    <button class="control-btn" id="websiteBtn">
                        <i class="fas fa-external-link-alt"></i> Visit Website
                    </button>
                </div>
            </header>
        </div>
        
        <div class="setup-container" id="setupContainer">
            <h2><i class="fas fa-cog"></i> Quiz Setup</h2>
            
            <div class="form-section">
                <div class="form-group">
                    <label for="examBoard">Exam/Board:</label>
                    <select id="examBoard">
                        <option value="cbse">CBSE</option>
                        <option value="icse">ICSE</option>
                        <option value="state">State Board</option>
                        <option value="igcse">IGCSE</option>
                        <option value="ib">International Baccalaureate (IB)</option>
                        <option value="neet">NEET</option>
                        <option value="jee">JEE</option>
                        <option value="upsc">UPSC</option>
                        <option value="ssc">SSC</option>
                        <option value="other">Other Exam/Board</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="classLevel">Class/Course Level:</label>
                    <select id="classLevel">
                        <option value="class1">Class 1</option>
                        <option value="class2">Class 2</option>
                        <option value="class3">Class 3</option>
                        <option value="class4">Class 4</option>
                        <option value="class5">Class 5</option>
                        <option value="class6">Class 6</option>
                        <option value="class7">Class 7</option>
                        <option value="class8">Class 8</option>
                        <option value="class9">Class 9</option>
                        <option value="class10">Class 10</option>
                        <option value="class11">Class 11</option>
                        <option value="class12">Class 12</option>
                        <option value="undergrad">Undergraduate</option>
                        <option value="grad">Graduate</option>
                        <option value="professional">Professional</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </div>
            
            <div class="form-section">
                <div class="form-group">
                    <label for="subject">Subject:</label>
                    <select id="subject">
                        <option value="math">Mathematics</option>
                        <option value="science">Science</option>
                        <option value="physics">Physics</option>
                        <option value="chemistry">Chemistry</option>
                        <option value="biology">Biology</option>
                        <option value="history">History</option>
                        <option value="geography">Geography</option>
                        <option value="civics">Civics</option>
                        <option value="english">English</option>
                        <option value="hindi">Hindi</option>
                        <option value="sanskrit">Sanskrit</option>
                        <option value="computer">Computer Science</option>
                        <option value="arts">Arts</option>
                        <option value="music">Music</option>
                        <option value="physical">Physical Education</option>
                        <option value="general">General Knowledge</option>
                        <option value="other">Other Subject</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="topic">Topics/Chapter (optional):</label>
                    <input type="text" id="topic" placeholder="e.g., Algebra, World War II, Photosynthesis...">
                </div>
            </div>
            
            <div class="form-section">
                <div class="form-group">
                    <label for="language">Language:</label>
                    <select id="language">
                        <option value="english" selected>English</option>
                        <option value="hindi">Hindi</option>
                        <option value="spanish">Spanish</option>
                        <option value="french">French</option>
                        <option value="german">German</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="difficulty">Difficulty Level:</label>
                    <select id="difficulty">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
            </div>
            
            <div class="form-section">
                <div class="form-group">
                    <label for="questionCount">Number of Questions (Max 15):</label>
                    <input type="number" id="questionCount" min="1" max="15" value="5">
                </div>
                
                <div class="form-group">
                    <label for="timeLimit">Time Limit (minutes, 0 for no limit):</label>
                    <input type="number" id="timeLimit" min="0" max="60" value="10">
                </div>
            </div>
            
            <div class="centered-button-container">
                <button id="generateBtn" class="centered-button"><i class="fas fa-robot"></i> Generate Quiz</button>
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Generating Your Quiz With NexGenAiTech</p>
        </div>
        
        <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <h2 class="quiz-title">Quiz</h2>
                <div class="quiz-header-controls">
                    <button class="action-btn secondary" id="backBtn">
                        <i class="fas fa-home"></i> Home
                    </button>
                </div>
            </div>
            
            <div class="timer-container">
                <div>Time Remaining:</div>
                <div class="timer" id="timer">10:00</div>
            </div>
            
            <div class="review-panel" id="reviewPanel">
                <div class="review-title">
                    <i class="fas fa-list"></i> Question Review
                </div>
                <div class="review-status">
                    <div class="status-item">
                        <span class="status-color status-answered"></span>
                        <span>Answered</span>
                    </div>
                    <div class="status-item">
                        <span class="status-color status-skipped"></span>
                        <span>Skipped</span>
                    </div>
                    <div class="status-item">
                        <span class="status-color status-unanswered"></span>
                        <span>Unanswered</span>
                    </div>
                    <div class="status-item">
                        <span class="status-color status-current"></span>
                        <span>Current</span>
                    </div>
                </div>
                <div class="review-buttons" id="reviewButtons"></div>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div id="questionContainer"></div>
            <div class="navigation">
                <button class="nav-btn secondary" id="prevBtn"><i class="fas fa-arrow-left"></i> Previous</button>
                <button class="nav-btn" id="nextBtn">Next <i class="fas fa-arrow-right"></i></button>
            </div>
            <div class="centered-button-container">
                <button id="submitQuiz" class="centered-button" style="display: none;"><i class="fas fa-paper-plane"></i> Submit Quiz</button>
            </div>
        </div>
        
        <div class="results-container" id="resultsContainer">
            <h2><i class="fas fa-chart-line"></i> Quiz Results</h2>
            <div class="score" id="score"></div>
            <div class="analysis" id="analysis"></div>
            
            <div class="share-buttons">
                <button class="share-btn facebook" id="shareFacebook">
                    <i class="fab fa-facebook"></i> Share on Facebook
                </button>
                <button class="share-btn twitter" id="shareTwitter">
                    <i class="fab fa-twitter"></i> Share on Twitter
                </button>
                <button class="share-btn whatsapp" id="shareWhatsApp">
                    <i class="fab fa-whatsapp"></i> Share on WhatsApp
                </button>
            </div>
            
            <div class="centered-button-container">
                <button id="newQuizBtn" class="centered-button"><i class="fas fa-plus"></i> Create New Quiz</button>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2025 Sankalp Shiksha.</p>
            <p>Visit our website: <a href="https://www.sankalpshiksha.com" target="_blank">www.sankalpshiksha.com</a></p>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2><i class="fas fa-comment"></i> Feedback Form</h2>
            <p>We value your feedback! Please help us improve by sharing your experience.</p>
            
            <form id="feedbackForm" class="feedback-form">
                <div class="form-group">
                    <label for="feedbackName">Your Name (optional):</label>
                    <input type="text" id="feedbackName" placeholder="Enter your name">
                </div>
                
                <div class="form-group">
                    <label for="feedbackExperience">Your Experience <span class="form-required">*</span></label>
                    <textarea id="feedbackExperience" required placeholder="Please share your experience with our quiz platform..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="feedbackSuggestions">Suggestions for New Features:</label>
                    <textarea id="feedbackSuggestions" placeholder="What new features would you like to see?"></textarea>
                </div>
                
                <div class="centered-button-container">
                    <button type="submit" class="centered-button feedback-submit">
                        <i class="fas fa-paper-plane"></i> Submit Feedback
                    </button>
                </div>
            </form>
            
            <div class="feedback-success" id="feedbackSuccess">
                <i class="fas fa-check-circle"></i>
                <h3>Thank You!</h3>
                <p>Your feedback has been successfully submitted.</p>
            </div>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div class="modal" id="instructionsModal">
        <div class="modal-content">
            <span class="close-modal" id="closeInstructionsModal">&times;</span>
            <h2><i class="fas fa-info-circle"></i> Quiz Instructions</h2>
            <div class="instructions-content">
                <p><strong>Important:</strong> Each time you generate a quiz, unique questions are created based on your selected criteria.</p>
                
                <h3>How to Use:</h3>
                <ol>
                    <li>Fill in the quiz setup form with your preferences</li>
                    <li>Click "Generate Quiz" to create your customized quiz</li>
                    <li>Navigate through questions using Previous/Next buttons</li>
                    <li>Select an answer by clicking on any option</li>
                    <li>Use the question review panel to track your progress</li>
                    <li>Click "Submit Quiz" when you're finished</li>
                </ol>
                
                <h3>Question Status:</h3>
                <ul>
                    <li><span style="color: #27ae60; font-weight: bold;">Answered</span>: Questions you've answered</li>
                    <li><span style="color: #f39c12; font-weight: bold;">Skipped</span>: Questions you've visited but not answered</li>
                    <li><span style="color: #e74c3c; font-weight: bold;">Unanswered</span>: Questions you haven't visited yet</li>
                    <li><span style="color: #3498db; font-weight: bold;">Current</span>: The question you're currently viewing</li>
                </ul>
                
                <p>You can click on any question number in the review panel to jump directly to that question.</p>
            </div>
        </div>
    </div>

    <!-- User Details Modal -->
    <div class="modal" id="userDetailsModal">
        <div class="modal-content">
            <span class="close-modal" id="closeUserDetailsModal">&times;</span>
            <h2><i class="fas fa-user"></i> User Information</h2>
            <p>Please provide your details to generate the quiz.</p>
            
            <form id="userDetailsForm" class="user-details-form">
                <div class="form-group">
                    <label for="userName">Full Name <span class="form-required">*</span></label>
                    <input type="text" id="userName" required placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="userEmail">Email Address <span class="form-required">*</span></label>
                    <input type="email" id="userEmail" required placeholder="Enter your email address">
                </div>
                
                <div class="form-group">
                    <label for="userPhone">Phone Number (optional)</label>
                    <input type="tel" id="userPhone" placeholder="Enter your phone number">
                </div>
                
                <div class="centered-button-container">
                    <button type="submit" class="centered-button user-details-submit">
                        <i class="fas fa-check"></i> Submit & Generate Quiz
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // DOM elements
        const setupContainer = document.getElementById('setupContainer');
        const loading = document.getElementById('loading');
        const quizContainer = document.getElementById('quizContainer');
        const resultsContainer = document.getElementById('resultsContainer');
        const generateBtn = document.getElementById('generateBtn');
        const questionContainer = document.getElementById('questionContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitQuiz = document.getElementById('submitQuiz');
        const progressBar = document.getElementById('progressBar');
        const scoreElement = document.getElementById('score');
        const analysisElement = document.getElementById('analysis');
        const newQuizBtn = document.getElementById('newQuizBtn');
        const feedbackBtn = document.getElementById('feedbackBtn');
        const websiteBtn = document.getElementById('websiteBtn');
        const feedbackModal = document.getElementById('feedbackModal');
        const closeModal = document.getElementById('closeModal');
        const timerElement = document.getElementById('timer');
        const backBtn = document.getElementById('backBtn');
        const shareFacebook = document.getElementById('shareFacebook');
        const shareTwitter = document.getElementById('shareTwitter');
        const shareWhatsApp = document.getElementById('shareWhatsApp');
        const mainHeader = document.getElementById('mainHeader');
        const modeToggle = document.getElementById('modeToggle');
        const modeIcon = modeToggle.querySelector('i');
        const instructionsToggle = document.getElementById('instructionsToggle');
        const instructionsModal = document.getElementById('instructionsModal');
        const closeInstructionsModal = document.getElementById('closeInstructionsModal');
        const reviewPanel = document.getElementById('reviewPanel');
        const reviewButtons = document.getElementById('reviewButtons');
        const userDetailsModal = document.getElementById('userDetailsModal');
        const userDetailsForm = document.getElementById('userDetailsForm');
        const closeUserDetailsModal = document.getElementById('closeUserDetailsModal');
        const feedbackForm = document.getElementById('feedbackForm');
        const feedbackSuccess = document.getElementById('feedbackSuccess');
        
        // Form elements
        const examBoard = document.getElementById('examBoard');
        const classLevel = document.getElementById('classLevel');
        const subject = document.getElementById('subject');
        const topic = document.getElementById('topic');
        const language = document.getElementById('language');
        const difficulty = document.getElementById('difficulty');
        const questionCount = document.getElementById('questionCount');
        const timeLimit = document.getElementById('timeLimit');
        
        // Quiz variables
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizData = [];
        let timerInterval = null;
        let timeLeft = 0;
        let visitedQuestions = [];
        let userDetails = {};
        
        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            modeIcon.classList.remove('fa-moon');
            modeIcon.classList.add('fa-sun');
        }
        
        // Event listeners
        generateBtn.addEventListener('click', showUserDetailsModal);
        prevBtn.addEventListener('click', showPreviousQuestion);
        nextBtn.addEventListener('click', showNextQuestion);
        submitQuiz.addEventListener('click', showResults);
        newQuizBtn.addEventListener('click', resetQuiz);
        feedbackBtn.addEventListener('click', showFeedbackModal);
        websiteBtn.addEventListener('click', visitWebsite);
        closeModal.addEventListener('click', closeFeedbackModal);
        backBtn.addEventListener('click', goBackToHome);
        shareFacebook.addEventListener('click', shareOnFacebook);
        shareTwitter.addEventListener('click', shareOnTwitter);
        shareWhatsApp.addEventListener('click', shareOnWhatsApp);
        modeToggle.addEventListener('click', toggleDarkMode);
        instructionsToggle.addEventListener('click', showInstructionsModal);
        closeInstructionsModal.addEventListener('click', closeInstructionsModalFunc);
        userDetailsForm.addEventListener('submit', handleUserDetailsSubmit);
        closeUserDetailsModal.addEventListener('click', closeUserDetailsModalFunc);
        feedbackForm.addEventListener('submit', handleFeedbackSubmit);
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === feedbackModal) {
                closeFeedbackModal();
            }
            if (e.target === instructionsModal) {
                closeInstructionsModalFunc();
            }
            if (e.target === userDetailsModal) {
                closeUserDetailsModalFunc();
            }
        });
        
        // Show user details modal
        function showUserDetailsModal() {
            userDetailsModal.style.display = 'flex';
        }
        
        // Close user details modal
        function closeUserDetailsModalFunc() {
            userDetailsModal.style.display = 'none';
        }
        
        // Handle user details form submission
        function handleUserDetailsSubmit(e) {
            e.preventDefault();
            
            const userName = document.getElementById('userName').value;
            const userEmail = document.getElementById('userEmail').value;
            const userPhone = document.getElementById('userPhone').value;
            
            if (!userName || !userEmail) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(userEmail)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Save user details
            userDetails = {
                name: userName,
                email: userEmail,
                phone: userPhone || 'Not provided'
            };
            
            // Close the modal
            closeUserDetailsModalFunc();
            
            // Save user details to Google Sheets
            saveUserDetailsToSheet();
            
            // Generate the quiz
            generateQuiz();
        }
        
        // Save user details to Google Sheets
        async function saveUserDetailsToSheet() {
            try {
                // Prepare the data to send
                const formData = {
                    name: userDetails.name,
                    email: userDetails.email,
                    phone: userDetails.phone,
                    examBoard: examBoard.options[examBoard.selectedIndex].text,
                    classLevel: classLevel.options[classLevel.selectedIndex].text,
                    subject: subject.options[subject.selectedIndex].text,
                    topic: topic.value || 'General',
                    difficulty: difficulty.options[difficulty.selectedIndex].text,
                    questionCount: questionCount.value,
                    timestamp: new Date().toLocaleString()
                };
                
                // Send data to Google Apps Script
                const response = await fetch('https://script.google.com/macros/s/AKfycby__amSbCkt-Rmvh03BHXEczw5yZXCsNfNgjjPJph_0AQUgcAUk8_yDQ-9ttKHbFpxQGw/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                // Note: We're using no-cors mode so we won't get a response
                console.log('User details submitted to Google Sheets');
            } catch (error) {
                console.error('Error saving user details:', error);
                // Continue with quiz generation even if saving fails
            }
        }
        
        // Handle feedback form submission
        async function handleFeedbackSubmit(e) {
            e.preventDefault();
            
            const feedbackName = document.getElementById('feedbackName').value || 'Anonymous';
            const feedbackExperience = document.getElementById('feedbackExperience').value;
            const feedbackSuggestions = document.getElementById('feedbackSuggestions').value || 'No suggestions provided';
            
            if (!feedbackExperience) {
                alert('Please share your experience before submitting');
                return;
            }
            
            try {
                // Prepare the feedback data to send
                const feedbackData = {
                    name: feedbackName,
                    experience: feedbackExperience,
                    suggestions: feedbackSuggestions,
                    timestamp: new Date().toLocaleString()
                };
                
                // Send feedback data to Google Apps Script
                await fetch('https://script.google.com/macros/s/AKfycbxQJKlVWabcNjUGqKULJx5z7q0mKMhqwUMixlBp55byT-qdAPs_53KQAEU0LYFb_0US/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(feedbackData)
                });
                
                // Show success message
                feedbackForm.style.display = 'none';
                feedbackSuccess.style.display = 'block';
                
                // Close modal after 2 seconds
                setTimeout(() => {
                    closeFeedbackModal();
                    feedbackForm.style.display = 'block';
                    feedbackSuccess.style.display = 'none';
                    feedbackForm.reset();
                }, 2000);
                
            } catch (error) {
                console.error('Error submitting feedback:', error);
                alert('There was an error submitting your feedback. Please try again.');
            }
        }
        
        // Toggle dark mode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                modeIcon.classList.remove('fa-moon');
                modeIcon.classList.add('fa-sun');
            } else {
                localStorage.setItem('darkMode', 'disabled');
                modeIcon.classList.remove('fa-sun');
                modeIcon.classList.add('fa-moon');
            }
        }
        
        // Show instructions modal
        function showInstructionsModal() {
            instructionsModal.style.display = 'flex';
        }
        
        // Close instructions modal
        function closeInstructionsModalFunc() {
            instructionsModal.style.display = 'none';
        }
        
        // Show feedback modal
        function showFeedbackModal() {
            feedbackModal.style.display = 'flex';
        }
        
        // Close feedback modal
        function closeFeedbackModal() {
            feedbackModal.style.display = 'none';
            feedbackForm.style.display = 'block';
            feedbackSuccess.style.display = 'none';
            feedbackForm.reset();
        }
        
        // Generate quiz using AI
        async function generateQuiz() {
            const examBoardValue = examBoard.value;
            const classValue = classLevel.value;
            const subjectValue = subject.value;
            const topicValue = topic.value;
            const languageValue = language.value;
            const difficultyValue = difficulty.value;
            const questionCountValue = questionCount.value;
            const timeLimitValue = timeLimit.value;
            
            if (questionCountValue > 15) {
                alert('Maximum number of questions is 15');
                return;
            }
            
            if (!topicValue && subjectValue === 'general') {
                alert('Please enter a topic for your quiz or select a specific subject');
                return;
            }
            
            // Show loading, hide setup and header
            setupContainer.style.display = 'none';
            mainHeader.style.display = 'none';
            loading.style.display = 'block';
            
            try {
                // Create prompt for the AI
                const prompt = `
                    Create a ${difficultyValue} difficulty quiz for ${examBoardValue} ${classValue} level on the subject of ${subjectValue} ${topicValue ? 'with a focus on ' + topicValue : ''}.
                    Generate exactly ${questionCountValue} multiple choice questions in ${languageValue} language.
                    Each question should have 4 options labeled A, B, C, D and one correct answer.
                    Format the response as a JSON array without any additional text. Each object in the array should have:
                    - question: the question text
                    - options: array of 4 option strings
                    - answer: the correct answer (A, B, C, or D)
                    
                    Example format:
                    [
                      {
                        "question": "What is the capital of France?",
                        "options": ["London", "Berlin", "Paris", "Madrid"],
                        "answer": "C"
                      }
                    ]
                `;
                
                // Make API request
                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [
                            {
                                parts: [
                                    {
                                        text: prompt
                                    }
                                ]
                            }
                        ]
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }
                
                const data = await response.json();
                const responseText = data.candidates[0].content.parts[0].text;
                
                // Extract JSON from response (might have backticks)
                const jsonMatch = responseText.match(/\[[\s\S]*\]/);
                if (jsonMatch) {
                    quizData = JSON.parse(jsonMatch[0]);
                    userAnswers = new Array(quizData.length).fill(null);
                    visitedQuestions = new Array(quizData.length).fill(false);
                    
                    // Initialize quiz
                    loading.style.display = 'none';
                    quizContainer.style.display = 'block';
                    currentQuestionIndex = 0;
                    visitedQuestions[0] = true;
                    
                    // Create review buttons
                    createReviewButtons();
                    updateReviewPanel();
                    
                    // Start timer if time limit is set
                    if (timeLimitValue > 0) {
                        startTimer(timeLimitValue * 60); // Convert minutes to seconds
                    } else {
                        timerElement.parentElement.style.display = 'none';
                    }
                    
                    updateProgressBar();
                    displayQuestion();
                } else {
                    throw new Error('Could not parse quiz data from API response');
                }
                
            } catch (error) {
                console.error('Error generating quiz:', error);
                loading.style.display = 'none';
                setupContainer.style.display = 'block';
                mainHeader.style.display = 'block';
                alert('Failed to generate quiz. Please try again with a different topic or subject.');
                
                // Use fallback data for demonstration
                useFallbackQuizData();
            }
        }
        
        // Create review buttons
        function createReviewButtons() {
            reviewButtons.innerHTML = '';
            for (let i = 0; i < quizData.length; i++) {
                const button = document.createElement('div');
                button.className = 'review-btn';
                button.textContent = i + 1;
                button.setAttribute('data-index', i);
                
                button.addEventListener('click', () => {
                    currentQuestionIndex = i;
                    visitedQuestions[i] = true;
                    updateProgressBar();
                    updateReviewPanel();
                    displayQuestion();
                });
                
                reviewButtons.appendChild(button);
            }
        }
        
        // Update review panel
        function updateReviewPanel() {
            const buttons = reviewButtons.querySelectorAll('.review-btn');
            buttons.forEach((button, index) => {
                const i = parseInt(button.getAttribute('data-index'));
                
                // Remove all status classes
                button.classList.remove('answered', 'skipped', 'unanswered', 'current');
                
                // Add appropriate status class
                if (i === currentQuestionIndex) {
                    button.classList.add('current');
                } else if (userAnswers[i] !== null) {
                    button.classList.add('answered');
                } else if (visitedQuestions[i]) {
                    button.classList.add('skipped');
                } else {
                    button.classList.add('unanswered');
                }
            });
        }
        
        // Start the timer
        function startTimer(seconds) {
            timeLeft = seconds;
            updateTimerDisplay();
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert('Time is up! Submitting your quiz now.');
                    showResults();
                } else if (timeLeft <= 60) {
                    // Less than 1 minute remaining
                    timerElement.classList.add('warning');
                }
            }, 1000);
        }
        
        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Use fallback quiz data if API fails
        function useFallbackQuizData() {
            quizData = fallbackQuizData;
            userAnswers = new Array(quizData.length).fill(null);
            visitedQuestions = new Array(quizData.length).fill(false);
            
            loading.style.display = 'none';
            quizContainer.style.display = 'block';
            currentQuestionIndex = 0;
            visitedQuestions[0] = true;
            
            // Create review buttons
            createReviewButtons();
            updateReviewPanel();
            
            // Start timer if time limit is set
            const timeLimitValue = timeLimit.value;
            if (timeLimitValue > 0) {
                startTimer(timeLimitValue * 60);
            } else {
                timerElement.parentElement.style.display = 'none';
            }
            
            updateProgressBar();
            displayQuestion();
        }
        
        // Display current question
        function displayQuestion() {
            const question = quizData[currentQuestionIndex];
            questionContainer.innerHTML = `
                <div class="question">
                    <h3>Question ${currentQuestionIndex + 1}</h3>
                    <p>${question.question}</p>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option ${userAnswers[currentQuestionIndex] === String.fromCharCode(65 + index) ? 'selected' : ''}" 
                                 data-option="${String.fromCharCode(65 + index)}">
                                ${String.fromCharCode(65 + index)}. ${option}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Add event listeners to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', selectOption);
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = false;
            submitQuiz.style.display = currentQuestionIndex === quizData.length - 1 ? 'block' : 'none';
            
            // Update review panel
            updateReviewPanel();
        }
        
        // Select an option
        function selectOption(e) {
            const selectedOption = e.target.getAttribute('data-option');
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Update UI
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            e.target.classList.add('selected');
            
            // Update review panel
            updateReviewPanel();
            
            // Auto-advance to next question after a short delay if not the last question
            if (currentQuestionIndex < quizData.length - 1) {
                setTimeout(showNextQuestion, 500);
            }
        }
        
        // Show next question
        function showNextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                visitedQuestions[currentQuestionIndex] = true;
                updateProgressBar();
                updateReviewPanel();
                displayQuestion();
            }
        }
        
        // Show previous question
        function showPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                visitedQuestions[currentQuestionIndex] = true;
                updateProgressBar();
                updateReviewPanel();
                displayQuestion();
            }
        }
        
        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // Show results
        function showResults() {
            // Stop the timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Calculate score
            let correctCount = 0;
            quizData.forEach((question, index) => {
                if (userAnswers[index] === question.answer) {
                    correctCount++;
                }
            });
            
            const score = (correctCount / quizData.length) * 100;
            
            // Display score
            scoreElement.textContent = `Score: ${score.toFixed(1)}% (${correctCount}/${quizData.length})`;
            
            // Generate analysis
            let analysisHTML = `
                <h3>Quiz Details:</h3>
                <p><span class="badge">Exam/Board</span> ${examBoard.options[examBoard.selectedIndex].text}</p>
                <p><span class="badge">Class</span> ${classLevel.options[classLevel.selectedIndex].text}</p>
                <p><span class="badge">Subject</span> ${subject.options[subject.selectedIndex].text}</p>
                <p><span class="badge">Topic</span> ${topic.value || 'General'}</p>
                <p><span class="badge">Difficulty</span> ${difficulty.options[difficulty.selectedIndex].text}</p>
                
                <h3 style="margin-top: 15px;">Question Analysis:</h3>
            `;
            
            quizData.forEach((question, index) => {
                const isCorrect = userAnswers[index] === question.answer;
                const userAnswerLetter = userAnswers[index] || 'Not answered';
                const correctAnswerLetter = question.answer;
                const correctAnswerIndex = correctAnswerLetter.charCodeAt(0) - 65;
                const correctAnswerText = question.options[correctAnswerIndex];
                
                analysisHTML += `
                    <div class="question-analysis">
                        <p><strong>Question ${index + 1}:</strong> ${question.question}</p>
                        <p class="${isCorrect ? 'correct' : 'incorrect'}">
                            Your answer: ${userAnswerLetter} 
                            ${isCorrect ? '✓ Correct' : '✗ Incorrect'}
                        </p>
                        <div class="correct-answer">
                            <strong>Correct Answer:</strong> ${correctAnswerLetter}. ${correctAnswerText}
                        </div>
                    </div>
                `;
            });
            
            analysisElement.innerHTML = analysisHTML;
            
            // Show results, hide quiz
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
        }
        
        // Reset quiz
        function resetQuiz() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            timerElement.classList.remove('warning');
            timerElement.parentElement.style.display = 'flex';
            
            resultsContainer.style.display = 'none';
            setupContainer.style.display = 'block';
            mainHeader.style.display = 'block';
            currentQuestionIndex = 0;
            userAnswers = [];
            quizData = [];
            visitedQuestions = [];
            userDetails = {};
            
            // Reset the user details form
            userDetailsForm.reset();
        }
        
        // Go back to home screen
        function goBackToHome() {
            if (confirm('Are you sure you want to go back? Your current progress will be lost.')) {
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
                
                quizContainer.style.display = 'none';
                setupContainer.style.display = 'block';
                mainHeader.style.display = 'block';
                currentQuestionIndex = 0;
                userAnswers = [];
                quizData = [];
                visitedQuestions = [];
                userDetails = {};
                
                // Reset the user details form
                userDetailsForm.reset();
            }
        }
        
        // Share on Facebook
        function shareOnFacebook() {
            const scoreText = scoreElement.textContent;
            const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://www.sankalpshiksha.com')}&quote=${encodeURIComponent(`I scored ${scoreText} on Sankalp Shiksha Quiz!`)}`;
            window.open(shareUrl, '_blank');
        }
        
        // Share on Twitter
        function shareOnTwitter() {
            const scoreText = scoreElement.textContent;
            const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(`I scored ${scoreText} on Sankalp Shiksha Quiz! Check it out at https://www.sankalpshiksha.com`)}`;
            window.open(shareUrl, '_blank');
        }
        
        // Share on WhatsApp
        function shareOnWhatsApp() {
            const scoreText = scoreElement.textContent;
            const shareUrl = `https://wa.me/?text=${encodeURIComponent(`I scored ${scoreText} on Sankalp Shiksha Quiz! Check it out at https://www.sankalpshiksha.com`)}`;
            window.open(shareUrl, '_blank');
        }
        
        // Visit website
        function visitWebsite() {
            window.open("https://www.sankalpshiksha.com", "_blank");
        }
        
        // Fallback quiz data in case API fails (for demonstration)
        const fallbackQuizData = [
            {
                question: "What is the capital of France?",
                options: ["London", "Berlin", "Paris", "Madrid"],
                answer: "C"
            },
            {
                question: "Which planet is known as the Red Planet?",
                options: ["Venus", "Mars", "Jupiter", "Saturn"],
                answer: "B"
            },
            {
                question: "What is the largest mammal in the world?",
                options: ["Elephant", "Blue Whale", "Giraffe", "Hippopotamus"],
                answer: "B"
            },
            {
                question: "Which element has the chemical symbol 'O'?",
                options: ["Gold", "Oxygen", "Osmium", "Oganesson"],
                answer: "B"
            },
            {
                question: "Who wrote 'Romeo and Juliet'?",
                options: ["Charles Dickens", "William Shakespeare", "Jane Austen", "Mark Twain"],
                answer: "B"
            }
        ];
        
        // API configuration
        const API_KEY = 'AIzaSyCn4a_7j77z04enY6vfse9ejh_kZlkW02U';
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';
    </script>
</body>
</html>